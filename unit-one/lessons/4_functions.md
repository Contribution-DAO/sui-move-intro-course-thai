# ฟังก์ชั่น

ในตอนนี้ เราจะมาแนะนำให้ทุกคนรู้จักฟังก์ชั่นใน Sui Move และพาทุกคนไปเขียนฟังก์ชั่นแรก ซึ่งเป็นส่วนหนึ่งในตัวอย่าง Hello World ของเรากัน

## ความสามารถในการมองเห็นของฟังก์ชั่น

ฟังก์ชั่นใน Sui Move สามารถจำกัดการมองเห็นได้ 3 ประเภท

- **private:** เป็นค่าเริ่มต้น; สามารถเข้าถึงได้โดยฟังก์ชันในโมดูลเดียวกันเท่านั้น
- **public:** ฟังก์ชันสามารถเข้าถึงได้โดยฟังก์ชันภายในโมดูลเดียวกัน และฟังก์ชันที่กำหนดในโมดูลอื่น
- **public(friend)**: ฟังก์ชันสามารถเข้าถึงได้โดยฟังก์ชันภายในโมดูลเดียวกัน และฟังก์ชันที่กำหนดในโมดูลที่อยู่ใน [รายชื่อเพื่อนของโมดูล](https://diem.github.io/move/friends.html)

## ค่าที่ส่งคืน (Return Value)

ประเภทของค่าที่ส่งคืนของฟังก์ชั่นจะถูกระบุไว้ที่หลังพารามิเตอร์ของฟังก์ชั่น โดยคั่นด้วยเครื่องหมายทวิภาค (colon)

บรรทัดสุดท้ายของฟังก์ชั่นที่ไม่มีเครื่องหมาย semicolon คือค่าที่ส่งคืน

ตัวอย่าง:

```rust
    public fun addition (a: u8, b: u8): u8 {
        a + b    
    }
```

## Entry Functions

ใน Sui Move, entry functions คือฟังก์ชั่นง่ายๆ ที่สามารถถูกเรียกโดย transactions ซึ่งจะต้องประกอบไปด้วยข้อกำหนด 3 อย่างนี้:

- มีคีย์เวิร์ดคำว่า `entry`
- ไม่มีการคืนค่า
- (ไม่บังคับ) มี mutable reference ไปยังอินสแตนซ์ของ `TxContext` ที่พารามิเตอร์ตัวสุดท้าย

### Transaction Context

โดยทั่วไปแล้ว Entry functions จะมีตัวแปร `TxContext` อยู่ที่พารามิเตอร์ตัวสุดท้ายอยู่แล้ว ซึ่งถูกเซตไว้ให้โดย Sui Move VM ทำให้ผู้ใช้ไม่จำเป็นต้องระบุค่าตอนเรียกใช้งาน

ตัว `TxContext` จะประกอบไปด้วย ข้อมูลที่จำเป็น ของธุรกรรมที่เรียกใช้ entry function ตัวอย่างเช่น แอดเดรสของผู้ส่ง, แอดเดรสของคน sign, เวลาที่ทำธุรกรรม เป็นต้น

## สร้างฟังก์ชั่น `mint`

เราสามารถเขียนฟังก์ชั่นสร้างเหรียญ (minting function) ในตัวอย่าง Hello World ของเราได้ ดังต่อไปนี้:

```rust
    public entry fun mint(ctx: &mut TxContext) {
        let object = HelloWorldObject {
            id: object::new(ctx),
            text: string::utf8(b"Hello World!")
        };
        transfer::transfer(object, tx_context::sender(ctx));
    }
```

ฟังก์ชั่นนี้ จะทำการสร้างอินสแตนซ์ของตัวแปรประเภท `HelloWorldObject` จากนั้นใช้ฟังก์ชั่นการถ่ายโอนของระบบ Sui เพื่อส่งเหรียญไปให้คนทำธุรกรรม
